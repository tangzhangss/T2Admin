function createParmHtml(e){function y(e){var n="";return $.each(e,function(e,t){void 0!==t&&null!=t&&""!=t&&(n+=" on"+e+'="'+t+'" ')}),n}var h=[],v=[],m=[];flag?$.each(e,function(e,t){if(1!=t.custom)return!1;var n={top:t.y+"px",left:t.x+"px",width:t.width+"px",height:t.height+"px","line-height":t.height+"px"},a={width:t.widthL+"%"},i={width:t.widthR+"%"},l=$('<div class="form-group"></div>'),o=$('<label class="form-label"></label>');if(t.cname?o.text(t.cname):o.text(t.key),0!=t.selRange&&1!=t.selRange||l.append(o),"dynamic"==t.ptype&&l.hide(),o.css(a),l.css(n),!t.showtype||"select"!=t.showtype&&"multiple"!=t.showtype)if(!t.showtype||"date"!=t.showtype&&"year"!=t.showtype&&"month"!=t.showtype&&"time"!=t.showtype&&"datetime"!=t.showtype)if("radio"==t.showtype){var p=encodeURIComponent(t.value),s=$('<span class="form-input"></span>');if(t.keylist=window[t.fieldSize],t.keylist&&1==t.keylist.indexOf(":")&&(console.log(t.keylist),-1!=t.keylist.indexOf(",")))for(u=t.keylist.split(","),r=0;r<u.length;r++)s.append('<lable class="radio_text">'+u[r].split(":")[0]+"</lable>"),(c=$('<input name="'+t.key+'" value="'+u[r].split(":")[1]+'" type="radio" class="radio_text"'+y(t.event)+"/>")).find("input").css(i),s.append(c);s.css(i)}else if("checkbox"==t.showtype){var p=encodeURIComponent(t.value);(c=$('<input name="'+t.key+'" id="'+t.key+'" value="'+p+'" class="form-input" type="text" '+y(t.event)+"/>")).css(i)}else if("render"==t.showtype){var c,p=encodeURIComponent(t.value);(c=$('<input name="'+t.key+'" id="'+t.key+'" value="'+p+'" class="form-input" type="text" '+y(t.event)+"/>")).css(i),l.append(c),m.push(t)}else if("radio-pop"==t.showtype){d=$('<select name="'+t.key+'" id="'+t.key+'" class="form-select" '+y(t.event)+"></select>");if(t.value&&-1!=t.value.indexOf(":"))if(-1!=t.value.indexOf(","))for(u=t.value.split(","),r=0;r<u.length;r++)d.append("<option value='"+u[r].split(":")[1]+"'>"+u[r].split(":")[0]+"</option>");else d.append("<option value='"+t.value.split(":")[1]+"'>"+t.value.split(":")[0]+"</option>");else d.append("<option value=''></option>"),d.append("<option value='"+t.value+"'>"+t.value+"</option>");d.css(i),l.append(d),popupSelection.checkInit(d,t.cname)}else if("checkbox-pop"==t.showtype){d=$('<select name="'+t.key+'" id="'+t.key+'" class="form-select" '+y(t.event)+"></select>");if(t.value&&-1!=t.value.indexOf(":"))if(-1!=t.value.indexOf(","))for(u=t.value.split(","),r=0;r<u.length;r++)d.append("<option value='"+u[r].split(":")[1]+"'>"+u[r].split(":")[0]+"</option>");else d.append("<option value='"+t.value.split(":")[1]+"'>"+t.value.split(":")[0]+"</option>");else d.append("<option value=''></option>"),d.append("<option value='"+t.value+"'>"+t.value+"</option>");d.css(i),l.append(d),popupSelection.checkInit(d,t.cname,!0)}else"radio-pop-tree"==t.showtype?(p=encodeURIComponent(t.value),c=$('<input name="'+t.key+'" id="'+t.key+'" value="'+p+'" class="form-input" type="text" '+y(t.event)+"/>"),l.append(c),popupSelection.treeInit(c,t.cname,!1,t.fieldSize)):"checkbox-pop-tree"==t.showtype?(p=encodeURIComponent(t.value),c=$('<input name="'+t.key+'" id="'+t.key+'" value="'+p+'" class="form-input" type="text" '+y(t.event)+"/>"),l.append(c),popupSelection.treeInit(c,t.cname,!0,t.fieldSize)):(p=encodeURIComponent(t.value),(c=$('<input name="'+t.key+'" id="'+t.key+'" value="'+p+'" class="form-input" type="text" '+y(t.event)+"/>")).css(i),0!=t.selRange&&2!=t.selRange||l.append(c));else(c=$('<input name="'+t.key+'" id="'+t.key+'" value="'+t.value+'" class="form-input" type="text" '+y(t.event)+"/>")).css(i),0!=t.selRange&&2!=t.selRange||l.append(c),h.push(t);else{var d=$('<select name="'+t.key+'" id="'+t.key+'" class="form-select" '+y(t.event)+"></select>");if(t.keylist&&-1!=t.keylist.indexOf(":"))if(-1!=t.keylist.indexOf(",")){var u=t.keylist.split(",");d.append("<option value=''></option>");for(var r=0;r<u.length;r++)d.append("<option value='"+u[r].split(":")[1]+"'>"+u[r].split(":")[0]+"</option>")}else d.append("<option value='"+keylist.split(":")[1]+"'>"+keylist.split(":")[0]+"</option>");else d.append("<option value=''></option>"),d.append("<option value='"+t.value+"'>"+t.value+"</option>");d.css(i),0!=t.selRange&&2!=t.selRange||l.append(d),"multiple"==t.showtype&&(d.css("display","none"),v.push(t))}"hidden"!=$("#"+t.key).attr("type")&&l.appendTo($("#searchaddition"))}):$.each(e,function(e,t){if(t.showtype&&("select"==t.showtype||"multiple"==t.showtype)&&$("#"+t.key)){$("#"+t.key).empty();var n="";if(t.keylist&&-1!=t.keylist.indexOf(":"))if(-1!=t.keylist.indexOf(",")){var a=t.keylist.split(",");n+="<option value=''></option>";for(var i=0;i<a.length;i++)n+="<option value='"+a[i].split(":")[1]+"'>"+a[i].split(":")[0]+"</option>"}else n+="<option value='"+keylist.split(":")[1]+"'>"+keylist.split(":")[0]+"</option>";else n+="<option value=''></option>",n+="<option value='"+t.value+"'>"+t.value+"</option>";$("#"+t.key).append(n),"multiple"==t.showtype&&v.push(t)}});for(var t=0;t<h.length;t++){var n=h[t].format||"yyyy-MM-dd";laydate.render({elem:"#"+h[t].key,format:n,type:h[t].showtype})}for(t=0;t<m.length;t++){var l=m[t],n=l.format||"yyyy-MM-dd";laydate.render({elem:"#"+l.key,range:!0,done:function(e,t,n){var a,i=$("#"+l.fieldStyle);0<i.length&&(a=e.split(" - "),setTimeout(function(){$("#"+l.key).val(a[0])},1),i.val(a[1]))}})}for(t=0;t<v.length;t++)$("#"+v[t].key).popupSelection({searchOn:!0,inline:!0,multiple:!0,title:v[t].cname,cellCount:4,labelShow:!0})}function initSearchParm(e,n){var t=contextPath+"/rdppub/showparam";$.ajax({url:t,cache:!1,data:{uuid:e},type:"post",success:function(e){var t=e.data;t.searchParmJson.length<=0?$("#parmlist").hide():((e=t.queryArea)&&(e.css&&loadStyle(Base64Util.decode64(e.css)),e.js&&loadScript(Base64Util.decode64(e.js)),e.height&&$(".rt-parmlist").height(parseInt(e.height)+10)),createParmHtml(t.searchParmJson),$("#searchaddition").append('<input type="submit" onclick="test()" value="查询" id="searchlist" />')),1==n&&$("#searchaddition").submit()}})}var setting={data:{simpleData:{enable:!0}}},popupSelection={checkInit:function(e,t,n){$(e).popupSelection({searchOn:!0,inline:!1,multiple:n,title:"选择"+t,changeCallback:function(e){},cellCount:4,labelShow:!0})},treeInit:function(e,t,n,a){$(e).popupSelection({searchOn:!0,multiple:n,title:t,items:popupSelection.getItems(a),ztree:!0,changeCallback:function(e){},ztreeSetting:setting})},getItems:function(e){var t=[];return void 0!==window[e]?t=window[e]:$.ajax({url:contextPath+"/rdpparm/parm/"+e,cache:!1,async:!1,type:"post",success:function(e){t=e.data}}),t}};function loadScript(e,t){var n=document.createElement("script");n.type="text/javascript",void 0!==e&&(n.readyState?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,t())}:n.onload=function(){t()}),n.appendChild(document.createTextNode("\n"+e+"\n")),document.head.appendChild(n)}function loadStyle(e){var t=document.createElement("style");t.setAttribute("type","text/css"),t.styleSheet?t.styleSheet.cssText=e:(n=document.createTextNode("\n"+e+"\n"),t.appendChild(n));var n=document.getElementsByTagName("head");(n.length?n[0]:doc.documentElement).appendChild(t)}var flag=!0;function getQueryString(e){e=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),e=window.location.search.substr(1).match(e);return null!=e?unescape(e[2]):null}function initParm(e){flag&&(0==e?flag=!1:initSearchParm(uuid,e))}$(function(){var e=contextPath+"/rdppage/show/"+uuid;$("#btnSearch").attr("action",e),initParm(1),$(".rt-swicth").bind("click",function(){$(".rt-parmlist").hasClass("on")?($(".rt-parmlist").removeClass("on").css("margin-top",-$(".rt-parmlist").height()),$("body").css("overflow","hidden")):($(".rt-parmlist").addClass("on").css("margin-top",0),$("body").css("overflow","auto"))}),$("body").css("overflow","auto")});