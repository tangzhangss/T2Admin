!function(c){c.fn.borderSettings=function(e){e=c.extend({row:1,col:1},e);var n=c(this),i=n.find(".border_setting"),b={NONE:"none",MEDIUM_DASH_DOT_DOT:"dotted-2",HAIR:"dotted",SLANTED_DASH_DOT:"dotted-2",DOTTED:"dotted",MEDIUM_DASH_DOT:"dotted-2",DASH_DOT_DOT:"dotted-2",MEDIUM_DASHED:"dotted-2",DASH_DOT:"dotted",MEDIUM:"solid-2",DASHED:"dotted-2",THICK:"solid-3",THIN:"solid",DOUBLE:"double-3"},a={border:{setData:function(e){i.data("border-data",e)},getData:function(e){return i.data("border-data")},setDataAttr:function(e,r){var o=a.border.getData();o[e]=r,a.border.setData(o)},removeDataAttr:function(e){var r=a.border.getData();delete r[e],a.border.setData(r)},getDataAttr:function(e){return a.border.getData()[e]},setBorderColorAttr:function(e){var r=1,o="none",t=a.border.getDataAttr("color"),d=b[a.border.getDataAttr("borderType")];void 0!==d&&((d=d.split("-"))[0]&&(o=d[0]),d[1]&&(r=d[1]));function s(e){"none"!=o&&(a.border.setDataAttr(e+"-width",r),a.border.setDataAttr(e+"-style",o),a.border.setDataAttr(e+"-color",t),a.border.setDataAttr(e+"-type",a.border.getDataAttr("borderType")))}"string"==typeof e?s(e):"object"==typeof e&&c.each(e,function(e,r){s(r)})},removeBorderColorAttr:function(e){"string"==typeof e?(a.border.removeDataAttr(e+"-width"),a.border.removeDataAttr(e+"-style"),a.border.removeDataAttr(e+"-color"),a.border.removeDataAttr(e+"-type")):"object"==typeof e&&c.each(e,function(e,r){a.border.removeBorderColorAttr(r)})},initBordershow:function(e,r){var o=n.find(".show_border_style");o.html("");var t=110,d=156;2<=e?(e=2,t=55):e=1,2<=r?(r=2,d=78):r=1;for(var s=0;s<e;s++){var b=c('<span class="show_border_row"></span>');t&&b.css("height",t+"px");for(var a=0;a<r;a++){var l=c('<span class="show_border_col"><span class="col_text">文本</span></span>');l.append(),b.append(l),d&&b.find(".show_border_col").css("width",d+"px")}o.append(b)}1==e&&1==r?(i.find(".border_type[oper-type='inner-border']").addClass("disabled"),i.find(".set_border_square[oper-type='border-center']").addClass("disabled"),i.find(".set_border_square[oper-type='border-middle']").addClass("disabled")):2==e&&2==r?(i.find(".border_type[oper-type='inner-border']").removeClass("disabled"),i.find(".set_border_square[oper-type='border-center']").removeClass("disabled"),i.find(".set_border_square[oper-type='border-middle']").removeClass("disabled")):1==e?i.find(".set_border_square[oper-type='border-center']").addClass("disabled"):1==r&&i.find(".set_border_square[oper-type='border-middle']").addClass("disabled")},borderColor:function(){n.find(".border_color .color_bar").spectrum({showInput:!0,allowEmpty:!0,showAlpha:!1,showPalette:!0,togglePaletteOnly:!0,hideAfterPaletteSelect:!0,showSelectionPalette:!0,cancelText:"取消",chooseText:"确认",togglePaletteMoreText:"更多",togglePaletteLessText:"简略",palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]],change:function(e){a.border.setBorderColorBar(e.toRgbString()),a.border.setDataAttr("color",e.toRgbString())},show:function(e){},move:function(e){}})},setBorderColorBar:function(e){var r=i.find(".border_style_item .style_items .s_item"),o=i.find(".border_color .color_item");r.css("background-color",e),o.text(""),o.css("background-color",e)},getBorderStyle:function(){var e=1,r="none",o=a.border.getDataAttr("color"),t=b[a.border.getDataAttr("borderType")];return void 0!==t&&((t=t.split("-"))[0]&&(r=t[0]),t[1]&&(e=t[1])),"none"!=r?e+"px "+r+" "+o:""},borderSetEvent:function(){i.find(".border_style_item li").bind("click",function(){var e=c(this).attr("border-type");a.border.setDataAttr("borderType",e),c(this).siblings().find(".style_items").removeClass("active"),c(this).find(".style_items").addClass("active")});var d=i.find(".show_border_style");i.find(".border_preset .border_type").bind("click",function(){var e,r,o;c(this).hasClass("disabled")||b[a.border.getDataAttr("borderType")]&&"none"!=b[a.border.getDataAttr("borderType")]&&("none-border"==(e=c(this).attr("oper-type"))?(d.css({"border-top":"","border-left":"","border-bottom":"","border-right":""}),d.find(".show_border_row").eq(0).find(".show_border_col").eq(0).css({"border-right":"","border-bottom":""}),d.find(".show_border_row").eq(0).find(".show_border_col").eq(1).css({"border-bottom":""}),d.find(".show_border_row").eq(1).find(".show_border_col").eq(0).css({"border-right":""}),r=d.find(".show_border_row").eq(1).find(".show_border_col"),a.border.setBorderStyle(r[0],"border-top",!0),a.border.setBorderStyle(r[1],"border-top",!0),o=d.find(".show_border_row"),a.border.setBorderStyle(o.eq(0).find(".show_border_col").eq(1),"border-left",!0),a.border.setBorderStyle(o.eq(1).find(".show_border_col").eq(1),"border-left",!0),a.border.removeBorderColorAttr(["border-top","border-left","border-bottom","border-right","border-center","border-middle"]),i.find(".border_show .set_border_square").removeClass("selected")):"margin-border"==e?(d.css({"border-top":a.border.getBorderStyle(),"border-left":a.border.getBorderStyle(),"border-bottom":a.border.getBorderStyle(),"border-right":a.border.getBorderStyle()}),a.border.setBorderColorAttr(["border-top","border-left","border-bottom","border-right"]),i.find(".border_show .set_border_square[oper-type='border-top']").addClass("selected"),i.find(".border_show .set_border_square[oper-type='border-left']").addClass("selected"),i.find(".border_show .set_border_square[oper-type='border-right']").addClass("selected"),i.find(".border_show .set_border_square[oper-type='border-bottom']").addClass("selected")):"inner-border"==e&&(a.border.setBorderColorAttr(["border-center","border-middle"]),r=d.find(".show_border_row").eq(1).find(".show_border_col"),a.border.setBorderStyle(r[0],"border-top"),a.border.setBorderStyle(r[1],"border-top"),o=d.find(".show_border_row"),a.border.setBorderStyle(o.eq(0).find(".show_border_col").eq(1),"border-left"),a.border.setBorderStyle(o.eq(1).find(".show_border_col").eq(1),"border-left"),i.find(".border_show .set_border_square[oper-type='border-center']").addClass("selected"),i.find(".border_show .set_border_square[oper-type='border-middle']").addClass("selected")))}),i.find(".border_show .set_border_square").bind("click",function(){var e,r,o,t;c(this).hasClass("disabled")||b[a.border.getDataAttr("borderType")]&&"none"!=b[a.border.getDataAttr("borderType")]&&(e=c(this).attr("oper-type"),a.border.getDataAttr("color"),r=!0,r=c(this).hasClass("selected")?(c(this).removeClass("selected"),!0):(c(this).addClass("selected"),!1),o=function(e,r){r?a.border.removeBorderColorAttr(e):a.border.setBorderColorAttr(e)},"border-top"==e?(a.border.setBorderStyle(d,"border-top",r),o("border-top",r)):"border-center"==e?(t=d.find(".show_border_row").eq(1).find(".show_border_col"),a.border.setBorderStyle(t[0],"border-top",r),a.border.setBorderStyle(t[1],"border-top",r),o("border-center",r)):"border-bottom"==e?(a.border.setBorderStyle(d,"border-bottom",r),o("border-bottom",r)):"border-left"==e?(a.border.setBorderStyle(d,"border-left",r),o("border-left",r)):"border-middle"==e?(t=d.find(".show_border_row"),a.border.setBorderStyle(t.eq(0).find(".show_border_col").eq(1),"border-left",r),a.border.setBorderStyle(t.eq(1).find(".show_border_col").eq(1),"border-left",r),o("border-middle",r)):"border-right"==e&&(a.border.setBorderStyle(d,"border-right",r),o("border-right",r)))})},setBorderStyle:function(e,r,o){o?c(e).css(r,""):c(e).css(r,a.border.getBorderStyle())},init:function(){a.border.setData({color:"rgb(0,0,0)"}),a.border.borderColor(),a.border.borderSetEvent(),a.border.initBordershow(e.row,e.col)}},initSetting:function(){n.find(".layui-layer-btn").css({"background-color":"#F0F0F0"}),n.find(".tab_menus li[tab-type='border']").addClass("selected"),n.find(".tab_menus li").bind("click",function(){"border"!=c(this).attr("tab-type")?layer.msg(c(this).text()+"属性配置，正在建设中..."):(c(this).addClass("selected"),c(this).siblings().removeClass("selected"))}),a.border.init()}};a.initSetting()}}(jQuery);